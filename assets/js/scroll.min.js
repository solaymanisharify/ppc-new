window.addEventListener("load",()=>{const lenis=new Lenis();lenis.on("scroll",ScrollTrigger.update);gsap.ticker.add((time)=>{lenis.raf(time*1000)});gsap.ticker.lagSmoothing(0)});window.addEventListener("load",()=>{gsap.registerPlugin(ScrollTrigger,ScrollToPlugin);ScrollTrigger.create({trigger:"#tergeting-section",start:"top top",end:"bottom bottom",onEnter:()=>document.getElementById('tergeting-section').classList.add('bg-color-active'),onLeaveBack:()=>document.getElementById('tergeting-section').classList.remove('bg-color-active'),});const contentItems=document.querySelectorAll('.timeline-content-item');const images=document.querySelectorAll('.timeline-image');const dots=document.querySelectorAll('.dot');gsap.set(contentItems,{opacity:0,y:30});gsap.set(contentItems[0],{opacity:1,y:0});gsap.set(images,{opacity:0});gsap.set(images[0],{opacity:1});const tl=gsap.timeline({scrollTrigger:{trigger:"#tergeting-section",start:"top top",end:()=>"+="+(contentItems.length*100)+"%",pin:!0,scrub:1,onUpdate:(self)=>{const activeIndex=Math.round(self.progress*(contentItems.length-1));updateDots(activeIndex)}}});contentItems.forEach((item,i)=>{if(i===0){tl.addLabel("step0",0);return}
const startTime=i-0.8;const endTime=i;tl.to(images[i-1],{opacity:0,duration:0.2},startTime).to(images[i],{opacity:1,duration:0.5},startTime).to(contentItems[i-1],{opacity:0,y:-50,duration:0.2},startTime).to(item,{opacity:1,y:0,duration:0.5},startTime);tl.addLabel("step"+i,endTime)});dots.forEach((dot,i)=>{dot.addEventListener('click',()=>{const targetScroll=tl.scrollTrigger.labelToScroll("step"+i);gsap.to(window,{duration:0.2,scrollTo:{y:targetScroll},ease:"power2.inOut"})})});function updateDots(activeIndex){const progressLine=document.querySelector('.timeline-line-progress');dots.forEach((dot,i)=>{dot.classList.toggle('active',i===activeIndex);dot.classList.toggle('isFinished',i<activeIndex)});const totalDots=dots.length;const percentage=(activeIndex/(totalDots-1))*100;if(progressLine){progressLine.style.height=`${percentage}%`}}
const verticalCards=gsap.utils.toArray(".panel__card");verticalCards.forEach((verticalCard,index)=>{if(index!==0){gsap.set(verticalCard,{yPercent:135,})}});const mainTimeline=gsap.timeline({scrollTrigger:{trigger:".optimization-container",pin:!0,start:"top 4%",end:()=>`+=${verticalCards.length * 100}%`,scrub:1,pinSpacing:!0,invalidateOnRefresh:!0,},defaults:{ease:"none",},});verticalCards.forEach((verticalCard,index)=>{if(index===0)return;mainTimeline.to(verticalCard,{yPercent:0,duration:1,});mainTimeline.fromTo(verticalCard,{scale:1.05,},{scale:1,duration:0.5,},">-0.7",)});const horizontalCardContainer=document.querySelector(".horizontal");const horizontalCards=gsap.utils.toArray(".case-study-container");const stickyWrapper=document.querySelector(".sticky-body");function getScrollAmount(){let extraWidth=window.innerWidth-horizontalCardContainer.offsetWidth;return-(horizontalCardContainer.scrollWidth-window.innerWidth+extraWidth)}
const horizontalTimeline=gsap.timeline({scrollTrigger:{trigger:".sticky-body",start:"top 3%",end:()=>`+=${horizontalCardContainer.scrollWidth / 2}`,scrub:0.1,pin:!0,invalidateOnRefresh:!0,anticipatePin:1,},});horizontalTimeline.to(horizontalCardContainer,{x:getScrollAmount,ease:"none",});horizontalCards.forEach((horizontalCard)=>{gsap.from(horizontalCard,{scrollTrigger:{trigger:horizontalCard,containerAnimation:horizontalTimeline,start:"left 85%",end:"center 60%",scrub:!0,invalidateOnRefresh:!0,},},"<",)});const BackgroundColorChangeTimeline=gsap.timeline({scrollTrigger:{trigger:".amazon-ppc-card-body",start:"top top",onEnter:()=>{document.getElementById("amazon-ppc-card-bg-id").classList.add("bg-color-active")
document.getElementById("amazon-id-section").classList.add("bg-color-active")},onLeaveBack:()=>{document.getElementById("amazon-ppc-card-bg-id").classList.remove("bg-color-active")
document.getElementById("amazon-id-section").classList.remove("bg-color-active")},},});function syncImageChangeAnimation({sectionName,blockSelector,imageSelector,spacial=!1}){const blocks=gsap.utils.toArray(blockSelector);const images=gsap.utils.toArray(imageSelector);const blocksContainer=document.querySelector(`${sectionName} .amazon-content-img`);ScrollTrigger.matchMedia({"(min-width: 850px)":function(){ScrollTrigger.create({trigger:sectionName,start:"top 14%",endTrigger:blocks[blocks.length-1],end:"bottom center",pin:!0,scrub:!0,invalidateOnRefresh:!0,});blocks.forEach((block,index)=>{if(index===blocks.length-1)return;ScrollTrigger.create({trigger:block,start:"top center",end:"bottom center",scrub:!0,onEnter:()=>activate(index),onEnterBack:()=>activate(index),invalidateOnRefresh:!0,})});let mayHeight=spacial?90:105;blocks.forEach((block,index)=>{gsap.to(block,{y:()=>`-${blocks.length * mayHeight}% + ${index * 100}%`,ease:"none",scrollTrigger:{trigger:blocksContainer,start:"top 20%",endTrigger:blocks[blocks.length-1],end:"bottom 65%",scrub:3,invalidateOnRefresh:!0,},})});function activate(index){blocks.forEach((b,i)=>{gsap.to(b,{opacity:i===index?1:0.3,duration:0.3,})});images.forEach((img,i)=>{gsap.to(img,{opacity:i===index?1:0,duration:0.5,ease:"power1.inOut",overwrite:"auto",})})}},})}
syncImageChangeAnimation({sectionName:".amazon-ppc-section",blockSelector:".amazon-ppc-content-text",imageSelector:".amazon-ppc-img img",});syncImageChangeAnimation({sectionName:".amazon-keyword2-section",blockSelector:".amazon-keyword2-content-text",imageSelector:".amazon-keyword2-img img",spacial:!0,});mainTimeline.add(horizontalTimeline);mainTimeline.add(BackgroundColorChangeTimeline);ScrollTrigger.create({trigger:".amazon-ppc-strategy-container",start:"top top",onEnter:()=>{document.getElementById("amazon-ppc-strategy-container-id").classList.add("bg-color-active")
document.getElementById("question-pricing-section-id").classList.add("bg-color-active")},onLeaveBack:()=>{document.getElementById("amazon-ppc-strategy-container-id").classList.remove("bg-color-active")
document.getElementById("question-pricing-section-id").classList.remove("bg-color-active")},});ScrollTrigger.create({trigger:".amazon-advertising-pricing-section",start:"top top",onEnter:()=>{document.getElementById("amazon-advertising-pricing-section-id").classList.add("bg-color-active")
document.getElementById("bg-white-for-extra-id").classList.add("bg-color-active")},onLeaveBack:()=>{document.getElementById("amazon-advertising-pricing-section-id").classList.remove("bg-color-active")
document.getElementById("bg-white-for-extra-id").classList.remove("bg-color-active")},});function updateLayout(){ScrollTrigger.refresh()}
window.addEventListener("load",updateLayout);window.addEventListener("resize",updateLayout)})